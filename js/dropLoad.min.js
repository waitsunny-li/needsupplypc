"use strict";var _createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(e,t,i){if(t)n(e.prototype,t);if(i)n(e,i);return e}}();function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var Dropload=function(){function t(e){_classCallCheck(this,t);this.wrapper=e.el=="window"?"window":document.querySelector(e.el);this._windowHeight=0;this._containerHeight=0;this._isScrollB=false;this._distanceEnd=e.distanceEnd?e.distanceEnd:100;this.callback=e.success?e.success:function(){throw new Error("请添加触底时回调函数！")};this.init();this.listenWindowScroll();this.listenResize()}_createClass(t,[{key:"init",value:function e(){this._windowHeight=this.initWindoHeight();this._containerHeight=this.initContainerHeight()}},{key:"initWindoHeight",value:function e(){var t=0;if(this.wrapper=="window"){if(document.body.clientHeight&&document.documentElement.clientHeight){t=Math.min(document.body.clientHeight,document.documentElement.clientHeight)}else{t=Math.max(document.body.clientHeight,document.documentElement.clientHeight)}}else{this.wrapper.style.overflowY="auto";this.wrapper.style.overflowX="hidden";t=this.wrapper.offsetHeight}return t}},{key:"initContainerHeight",value:function e(){var t=this.wrapper.querySelector(".content");var i=0;try{i=t.offsetHeight}catch(e){throw new Error("请添加添加类为content的容器！")}return i}},{key:"refresh",value:function e(){this.init();this._isScrollB=false;console.log(this._containerHeight)}},{key:"listenWindowScroll",value:function e(){var t=this;t.wrapper.addEventListener("scroll",function(){var e=this.scrollTop||this.scrollTop;if(e+t._windowHeight>=t._containerHeight-t._distanceEnd){if(!t._isScrollB){t.callback()}t._isScrollB=true}})}},{key:"listenResize",value:function e(){var t=this;window.addEventListener("resize",function(){t.init()})}}]);return t}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BMb2FkLmpzIl0sIm5hbWVzIjpbIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJDb25zdHJ1Y3RvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiVHlwZUVycm9yIiwiRHJvcGxvYWQiLCJvcHRpb25zIiwidGhpcyIsIndyYXBwZXIiLCJlbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl93aW5kb3dIZWlnaHQiLCJfY29udGFpbmVySGVpZ2h0IiwiX2lzU2Nyb2xsQiIsIl9kaXN0YW5jZUVuZCIsImRpc3RhbmNlRW5kIiwiY2FsbGJhY2siLCJzdWNjZXNzIiwiRXJyb3IiLCJpbml0IiwibGlzdGVuV2luZG93U2Nyb2xsIiwibGlzdGVuUmVzaXplIiwidmFsdWUiLCJpbml0V2luZG9IZWlnaHQiLCJpbml0Q29udGFpbmVySGVpZ2h0Iiwid0hlaWdodCIsImJvZHkiLCJjbGllbnRIZWlnaHQiLCJkb2N1bWVudEVsZW1lbnQiLCJNYXRoIiwibWluIiwibWF4Iiwic3R5bGUiLCJvdmVyZmxvd1kiLCJvdmVyZmxvd1giLCJvZmZzZXRIZWlnaHQiLCJjb250YWluZXJfZWwiLCJvZmZzZXRIIiwiZXJyIiwicmVmcmVzaCIsImNvbnNvbGUiLCJsb2ciLCJzZWxmIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNjcm9sbFRvcCIsIl90aGlzIiwid2luZG93Il0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLElBQUlBLGFBQWUsV0FBYyxTQUFTQyxFQUFpQkMsRUFBUUMsR0FBUyxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLElB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Q2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbi8qXHJcbiAqIEBBdXRob3I6IGxpd2VpbG9uZ1xyXG4gKiBARGF0ZTogMjAyMC0xMS0xMyAxODozNDowM1xyXG4gKi9cbi8qKiBcclxuICogMeOAgeiOt+WPlueql+WPo+mrmOW6plxyXG4gKiAy44CB6I635Y+WY29udGFpbmVy6auY5bqmXHJcbiAqIDPjgIHojrflj5bmu5rliqjot53nprtzY3JvbGxUb3AgKyDnqpflj6Pot53nprsgPiBjb250YWluZXLpq5jluqbml7bop6blj5HliqDovb3mm7TlpJpcclxuICovXG52YXIgRHJvcGxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIERyb3Bsb2FkKG9wdGlvbnMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRHJvcGxvYWQpO1xuXG4gICAgLy8g5Yid5aeL5YyW5L2N572uXG4gICAgLy8gdGhpcy5faW5pdERpc3RhbmNlID0gMFxuICAgIHRoaXMud3JhcHBlciA9IG9wdGlvbnMuZWwgPT0gJ3dpbmRvdycgPyAnd2luZG93JyA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy5lbCk7XG4gICAgLy8g56qX5Y+j6auY5bqmXG4gICAgdGhpcy5fd2luZG93SGVpZ2h0ID0gMDtcbiAgICAvLyBjb250YWluZXLpq5jluqZcbiAgICB0aGlzLl9jb250YWluZXJIZWlnaHQgPSAwO1xuICAgIC8vIOaYr+WQpuinpuW6lVxuICAgIHRoaXMuX2lzU2Nyb2xsQiA9IGZhbHNlO1xuXG4gICAgLy8g6Led56a75bqV6YOo5aSa5bCR6Led56a76Kem5Y+RXG4gICAgdGhpcy5fZGlzdGFuY2VFbmQgPSBvcHRpb25zLmRpc3RhbmNlRW5kID8gb3B0aW9ucy5kaXN0YW5jZUVuZCA6IDEwMDtcbiAgICAvLyDop6blupXml7Yg6Kem5Y+RXG4gICAgdGhpcy5jYWxsYmFjayA9IG9wdGlvbnMuc3VjY2VzcyA/IG9wdGlvbnMuc3VjY2VzcyA6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign6K+35re75Yqg6Kem5bqV5pe25Zue6LCD5Ye95pWw77yBJyk7XG4gICAgfTtcblxuICAgIC8vIOWIneWni+WMlua1geeoi1xuICAgIHRoaXMuaW5pdCgpO1xuXG4gICAgLy8g55uR5ZCs5rua5YqoXG4gICAgdGhpcy5saXN0ZW5XaW5kb3dTY3JvbGwoKTtcbiAgICAvLyDnm5HlkKznqpflj6PmlLnlj5hcbiAgICB0aGlzLmxpc3RlblJlc2l6ZSgpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKERyb3Bsb2FkLCBbe1xuICAgIGtleTogJ2luaXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgdGhpcy5fd2luZG93SGVpZ2h0ID0gdGhpcy5pbml0V2luZG9IZWlnaHQoKTtcbiAgICAgIHRoaXMuX2NvbnRhaW5lckhlaWdodCA9IHRoaXMuaW5pdENvbnRhaW5lckhlaWdodCgpO1xuICAgIH1cblxuICAgIC8vIOWIneWni+WMlueql+WPo+mrmOW6plxuXG4gIH0sIHtcbiAgICBrZXk6ICdpbml0V2luZG9IZWlnaHQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0V2luZG9IZWlnaHQoKSB7XG4gICAgICB2YXIgd0hlaWdodCA9IDA7XG4gICAgICBpZiAodGhpcy53cmFwcGVyID09ICd3aW5kb3cnKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgICAgd0hlaWdodCA9IE1hdGgubWluKGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3SGVpZ2h0ID0gTWF0aC5tYXgoZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLndyYXBwZXIuc3R5bGUub3ZlcmZsb3dZID0gJ2F1dG8nO1xuICAgICAgICB0aGlzLndyYXBwZXIuc3R5bGUub3ZlcmZsb3dYID0gJ2hpZGRlbic7XG5cbiAgICAgICAgd0hlaWdodCA9IHRoaXMud3JhcHBlci5vZmZzZXRIZWlnaHQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gd0hlaWdodDtcbiAgICB9XG5cbiAgICAvLyDliJ3lp4vljJZjb250YWluZXLpq5jluqZcblxuICB9LCB7XG4gICAga2V5OiAnaW5pdENvbnRhaW5lckhlaWdodCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRDb250YWluZXJIZWlnaHQoKSB7XG4gICAgICB2YXIgY29udGFpbmVyX2VsID0gdGhpcy53cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50Jyk7XG4gICAgICB2YXIgb2Zmc2V0SCA9IDA7XG4gICAgICB0cnkge1xuICAgICAgICBvZmZzZXRIID0gY29udGFpbmVyX2VsLm9mZnNldEhlaWdodDtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCLor7fmt7vliqDmt7vliqDnsbvkuLpjb250ZW5055qE5a655Zmo77yBXCIpO1xuICAgICAgfVxuICAgICAgLy8gY29uc29sZS5sb2coJ2NvbnRhaW5lcumrmOW6picsIG9mZnNldEgpXG4gICAgICByZXR1cm4gb2Zmc2V0SDtcbiAgICB9XG5cbiAgICAvLyDph43mlrDorqHnrpd3aW5kb3fnqpflj6Plrr3luqblkozpq5jluqZcblxuICB9LCB7XG4gICAga2V5OiAncmVmcmVzaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlZnJlc2goKSB7XG4gICAgICB0aGlzLmluaXQoKTtcbiAgICAgIHRoaXMuX2lzU2Nyb2xsQiA9IGZhbHNlO1xuICAgICAgY29uc29sZS5sb2codGhpcy5fY29udGFpbmVySGVpZ2h0KTtcbiAgICB9XG5cbiAgICAvLyDnm5HlkKzmu5rliqjmnaHmu5rliqhcblxuICB9LCB7XG4gICAga2V5OiAnbGlzdGVuV2luZG93U2Nyb2xsJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbGlzdGVuV2luZG93U2Nyb2xsKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgc2VsZi53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNjcm9sbFRvcCA9IHRoaXMuc2Nyb2xsVG9wIHx8IHRoaXMuc2Nyb2xsVG9wO1xuICAgICAgICBpZiAoc2Nyb2xsVG9wICsgc2VsZi5fd2luZG93SGVpZ2h0ID49IHNlbGYuX2NvbnRhaW5lckhlaWdodCAtIHNlbGYuX2Rpc3RhbmNlRW5kKSB7XG4gICAgICAgICAgaWYgKCFzZWxmLl9pc1Njcm9sbEIpIHtcbiAgICAgICAgICAgIC8vIOinpuW6leaXtiDop6blj5FcbiAgICAgICAgICAgIHNlbGYuY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VsZi5faXNTY3JvbGxCID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g55uR5ZCs56qX5Y+j5aSn5bCP5pS55Y+Y5pe26YeN5paw6K6h566XXG5cbiAgfSwge1xuICAgIGtleTogJ2xpc3RlblJlc2l6ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxpc3RlblJlc2l6ZSgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLmluaXQoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEcm9wbG9hZDtcbn0oKTsiXX0=
