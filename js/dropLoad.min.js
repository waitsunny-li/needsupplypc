"use strict";var _createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(e,t,i){if(t)n(e.prototype,t);if(i)n(e,i);return e}}();function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var Dropload=function(){function t(e){_classCallCheck(this,t);this.wrapper=e.el=="window"?"window":document.querySelector(e.el);this._windowHeight=0;this._containerHeight=0;this._isScrollB=false;this._distanceEnd=e.distanceEnd?e.distanceEnd:100;this.callback=e.success?e.success:function(){throw new Error("请添加触底时回调函数！")};this.init();this.listenWindowScroll();this.listenResize()}_createClass(t,[{key:"init",value:function e(){this._windowHeight=this.initWindoHeight();this._containerHeight=this.initContainerHeight()}},{key:"initWindoHeight",value:function e(){var t=0;if(this.wrapper=="window"){if(document.body.clientHeight&&document.documentElement.clientHeight){t=Math.min(document.body.clientHeight,document.documentElement.clientHeight)}else{t=Math.max(document.body.clientHeight,document.documentElement.clientHeight)}}else{this.wrapper.style.overflowY="auto";this.wrapper.style.overflowX="hidden";t=this.wrapper.offsetHeight}return t}},{key:"initContainerHeight",value:function e(){var t=this.wrapper.querySelector(".content");var i=0;try{i=t.offsetHeight}catch(e){throw new Error("请添加添加类为content的容器！")}return i}},{key:"refresh",value:function e(){this.init();this._isScrollB=false}},{key:"listenWindowScroll",value:function e(){var t=this;t.wrapper.addEventListener("scroll",function(){var e=this.scrollTop||this.scrollTop;if(e+t._windowHeight>=t._containerHeight-t._distanceEnd){if(!t._isScrollB){t.callback()}t._isScrollB=true}})}},{key:"listenResize",value:function e(){var t=this;window.addEventListener("resize",function(){t.init()})}}]);return t}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BMb2FkLmpzIl0sIm5hbWVzIjpbIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJDb25zdHJ1Y3RvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiVHlwZUVycm9yIiwiRHJvcGxvYWQiLCJvcHRpb25zIiwidGhpcyIsIndyYXBwZXIiLCJlbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl93aW5kb3dIZWlnaHQiLCJfY29udGFpbmVySGVpZ2h0IiwiX2lzU2Nyb2xsQiIsIl9kaXN0YW5jZUVuZCIsImRpc3RhbmNlRW5kIiwiY2FsbGJhY2siLCJzdWNjZXNzIiwiRXJyb3IiLCJpbml0IiwibGlzdGVuV2luZG93U2Nyb2xsIiwibGlzdGVuUmVzaXplIiwidmFsdWUiLCJpbml0V2luZG9IZWlnaHQiLCJpbml0Q29udGFpbmVySGVpZ2h0Iiwid0hlaWdodCIsImJvZHkiLCJjbGllbnRIZWlnaHQiLCJkb2N1bWVudEVsZW1lbnQiLCJNYXRoIiwibWluIiwibWF4Iiwic3R5bGUiLCJvdmVyZmxvd1kiLCJvdmVyZmxvd1giLCJvZmZzZXRIZWlnaHQiLCJjb250YWluZXJfZWwiLCJvZmZzZXRIIiwiZXJyIiwicmVmcmVzaCIsInNlbGYiLCJhZGRFdmVudExpc3RlbmVyIiwic2Nyb2xsVG9wIiwiX3RoaXMiLCJ3aW5kb3ciXSwibWFwcGluZ3MiOiJBQUFBLGFBRUEsSUFBSUEsYUFBZSxXQUFjLFNBQVNDLEVBQWlCQyxFQUFRQyxHQUFTLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsSUFBSUUsRUFBYUgsRUFBTUMsR0FBSUUsRUFBV0MsV0FBYUQsRUFBV0MsWUFBYyxNQUFPRCxFQUFXRSxhQUFlLEtBQU0sR0FBSSxVQUFXRixFQUFZQSxFQUFXRyxTQUFXLEtBQU1DLE9BQU9DLGVBQWVULEVBQVFJLEVBQVdNLElBQUtOLElBQWlCLE9BQU8sU0FBVU8sRUFBYUMsRUFBWUMsR0FBZSxHQUFJRCxFQUFZYixFQUFpQlksRUFBWUcsVUFBV0YsR0FBYSxHQUFJQyxFQUFhZCxFQUFpQlksRUFBYUUsR0FBYyxPQUFPRixHQUE3Z0IsR0FFbkIsU0FBU0ksZ0JBQWdCQyxFQUFVTCxHQUFlLEtBQU1LLGFBQW9CTCxHQUFjLENBQUUsTUFBTSxJQUFJTSxVQUFVLHNDQVdoSCxJQUFJQyxTQUFXLFdBQ2IsU0FBU0EsRUFBU0MsR0FDaEJKLGdCQUFnQkssS0FBTUYsR0FJdEJFLEtBQUtDLFFBQVVGLEVBQVFHLElBQU0sU0FBVyxTQUFXQyxTQUFTQyxjQUFjTCxFQUFRRyxJQUVsRkYsS0FBS0ssY0FBZ0IsRUFFckJMLEtBQUtNLGlCQUFtQixFQUV4Qk4sS0FBS08sV0FBYSxNQUdsQlAsS0FBS1EsYUFBZVQsRUFBUVUsWUFBY1YsRUFBUVUsWUFBYyxJQUVoRVQsS0FBS1UsU0FBV1gsRUFBUVksUUFBVVosRUFBUVksUUFBVSxXQUNsRCxNQUFNLElBQUlDLE1BQU0sZ0JBSWxCWixLQUFLYSxPQUdMYixLQUFLYyxxQkFFTGQsS0FBS2UsZUFHUHJDLGFBQWFvQixFQUFVLENBQUMsQ0FDdEJSLElBQUssT0FDTDBCLE1BQU8sU0FBU0gsSUFDZGIsS0FBS0ssY0FBZ0JMLEtBQUtpQixrQkFDMUJqQixLQUFLTSxpQkFBbUJOLEtBQUtrQix3QkFLOUIsQ0FDRDVCLElBQUssa0JBQ0wwQixNQUFPLFNBQVNDLElBQ2QsSUFBSUUsRUFBVSxFQUNkLEdBQUluQixLQUFLQyxTQUFXLFNBQVUsQ0FDNUIsR0FBSUUsU0FBU2lCLEtBQUtDLGNBQWdCbEIsU0FBU21CLGdCQUFnQkQsYUFBYyxDQUN2RUYsRUFBVUksS0FBS0MsSUFBSXJCLFNBQVNpQixLQUFLQyxhQUFjbEIsU0FBU21CLGdCQUFnQkQsa0JBQ25FLENBQ0xGLEVBQVVJLEtBQUtFLElBQUl0QixTQUFTaUIsS0FBS0MsYUFBY2xCLFNBQVNtQixnQkFBZ0JELG1CQUVyRSxDQUNMckIsS0FBS0MsUUFBUXlCLE1BQU1DLFVBQVksT0FDL0IzQixLQUFLQyxRQUFReUIsTUFBTUUsVUFBWSxTQUUvQlQsRUFBVW5CLEtBQUtDLFFBQVE0QixhQUV6QixPQUFPVixJQUtSLENBQ0Q3QixJQUFLLHNCQUNMMEIsTUFBTyxTQUFTRSxJQUNkLElBQUlZLEVBQWU5QixLQUFLQyxRQUFRRyxjQUFjLFlBQzlDLElBQUkyQixFQUFVLEVBQ2QsSUFDRUEsRUFBVUQsRUFBYUQsYUFDdkIsTUFBT0csR0FDUCxNQUFNLElBQUlwQixNQUFNLHNCQUdsQixPQUFPbUIsSUFLUixDQUNEekMsSUFBSyxVQUNMMEIsTUFBTyxTQUFTaUIsSUFDZGpDLEtBQUthLE9BQ0xiLEtBQUtPLFdBQWEsUUFLbkIsQ0FDRGpCLElBQUsscUJBQ0wwQixNQUFPLFNBQVNGLElBQ2QsSUFBSW9CLEVBQU9sQyxLQUNYa0MsRUFBS2pDLFFBQVFrQyxpQkFBaUIsU0FBVSxXQUN0QyxJQUFJQyxFQUFZcEMsS0FBS29DLFdBQWFwQyxLQUFLb0MsVUFDdkMsR0FBSUEsRUFBWUYsRUFBSzdCLGVBQWlCNkIsRUFBSzVCLGlCQUFtQjRCLEVBQUsxQixhQUFjLENBQy9FLElBQUswQixFQUFLM0IsV0FBWSxDQUVwQjJCLEVBQUt4QixXQUVQd0IsRUFBSzNCLFdBQWEsVUFPdkIsQ0FDRGpCLElBQUssZUFDTDBCLE1BQU8sU0FBU0QsSUFDZCxJQUFJc0IsRUFBUXJDLEtBRVpzQyxPQUFPSCxpQkFBaUIsU0FBVSxXQUNoQ0UsRUFBTXhCLGFBS1osT0FBT2YsRUFsSE0iLCJmaWxlIjoiZHJvcExvYWQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKlxyXG4gKiBAQXV0aG9yOiBsaXdlaWxvbmdcclxuICogQERhdGU6IDIwMjAtMTEtMTMgMTg6MzQ6MDNcclxuICovXG4vKiogXHJcbiAqIDHjgIHojrflj5bnqpflj6Ppq5jluqZcclxuICogMuOAgeiOt+WPlmNvbnRhaW5lcumrmOW6plxyXG4gKiAz44CB6I635Y+W5rua5Yqo6Led56a7c2Nyb2xsVG9wICsg56qX5Y+j6Led56a7ID4gY29udGFpbmVy6auY5bqm5pe26Kem5Y+R5Yqg6L295pu05aSaXHJcbiAqL1xudmFyIERyb3Bsb2FkID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEcm9wbG9hZChvcHRpb25zKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyb3Bsb2FkKTtcblxuICAgIC8vIOWIneWni+WMluS9jee9rlxuICAgIC8vIHRoaXMuX2luaXREaXN0YW5jZSA9IDBcbiAgICB0aGlzLndyYXBwZXIgPSBvcHRpb25zLmVsID09ICd3aW5kb3cnID8gJ3dpbmRvdycgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbnMuZWwpO1xuICAgIC8vIOeql+WPo+mrmOW6plxuICAgIHRoaXMuX3dpbmRvd0hlaWdodCA9IDA7XG4gICAgLy8gY29udGFpbmVy6auY5bqmXG4gICAgdGhpcy5fY29udGFpbmVySGVpZ2h0ID0gMDtcbiAgICAvLyDmmK/lkKbop6blupVcbiAgICB0aGlzLl9pc1Njcm9sbEIgPSBmYWxzZTtcblxuICAgIC8vIOi3neemu+W6lemDqOWkmuWwkei3neemu+inpuWPkVxuICAgIHRoaXMuX2Rpc3RhbmNlRW5kID0gb3B0aW9ucy5kaXN0YW5jZUVuZCA/IG9wdGlvbnMuZGlzdGFuY2VFbmQgOiAxMDA7XG4gICAgLy8g6Kem5bqV5pe2IOinpuWPkVxuICAgIHRoaXMuY2FsbGJhY2sgPSBvcHRpb25zLnN1Y2Nlc3MgPyBvcHRpb25zLnN1Y2Nlc3MgOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+ivt+a3u+WKoOinpuW6leaXtuWbnuiwg+WHveaVsO+8gScpO1xuICAgIH07XG5cbiAgICAvLyDliJ3lp4vljJbmtYHnqItcbiAgICB0aGlzLmluaXQoKTtcblxuICAgIC8vIOebkeWQrOa7muWKqFxuICAgIHRoaXMubGlzdGVuV2luZG93U2Nyb2xsKCk7XG4gICAgLy8g55uR5ZCs56qX5Y+j5pS55Y+YXG4gICAgdGhpcy5saXN0ZW5SZXNpemUoKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhEcm9wbG9hZCwgW3tcbiAgICBrZXk6ICdpbml0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIHRoaXMuX3dpbmRvd0hlaWdodCA9IHRoaXMuaW5pdFdpbmRvSGVpZ2h0KCk7XG4gICAgICB0aGlzLl9jb250YWluZXJIZWlnaHQgPSB0aGlzLmluaXRDb250YWluZXJIZWlnaHQoKTtcbiAgICB9XG5cbiAgICAvLyDliJ3lp4vljJbnqpflj6Ppq5jluqZcblxuICB9LCB7XG4gICAga2V5OiAnaW5pdFdpbmRvSGVpZ2h0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdFdpbmRvSGVpZ2h0KCkge1xuICAgICAgdmFyIHdIZWlnaHQgPSAwO1xuICAgICAgaWYgKHRoaXMud3JhcHBlciA9PSAnd2luZG93Jykge1xuICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkge1xuICAgICAgICAgIHdIZWlnaHQgPSBNYXRoLm1pbihkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd0hlaWdodCA9IE1hdGgubWF4KGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy53cmFwcGVyLnN0eWxlLm92ZXJmbG93WSA9ICdhdXRvJztcbiAgICAgICAgdGhpcy53cmFwcGVyLnN0eWxlLm92ZXJmbG93WCA9ICdoaWRkZW4nO1xuXG4gICAgICAgIHdIZWlnaHQgPSB0aGlzLndyYXBwZXIub2Zmc2V0SGVpZ2h0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdIZWlnaHQ7XG4gICAgfVxuXG4gICAgLy8g5Yid5aeL5YyWY29udGFpbmVy6auY5bqmXG5cbiAgfSwge1xuICAgIGtleTogJ2luaXRDb250YWluZXJIZWlnaHQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0Q29udGFpbmVySGVpZ2h0KCkge1xuICAgICAgdmFyIGNvbnRhaW5lcl9lbCA9IHRoaXMud3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xuICAgICAgdmFyIG9mZnNldEggPSAwO1xuICAgICAgdHJ5IHtcbiAgICAgICAgb2Zmc2V0SCA9IGNvbnRhaW5lcl9lbC5vZmZzZXRIZWlnaHQ7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwi6K+35re75Yqg5re75Yqg57G75Li6Y29udGVudOeahOWuueWZqO+8gVwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG9mZnNldEg7XG4gICAgfVxuXG4gICAgLy8g6YeN5paw6K6h566Xd2luZG9356qX5Y+j5a695bqm5ZKM6auY5bqmXG5cbiAgfSwge1xuICAgIGtleTogJ3JlZnJlc2gnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZWZyZXNoKCkge1xuICAgICAgdGhpcy5pbml0KCk7XG4gICAgICB0aGlzLl9pc1Njcm9sbEIgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyDnm5HlkKzmu5rliqjmnaHmu5rliqhcblxuICB9LCB7XG4gICAga2V5OiAnbGlzdGVuV2luZG93U2Nyb2xsJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbGlzdGVuV2luZG93U2Nyb2xsKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgc2VsZi53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNjcm9sbFRvcCA9IHRoaXMuc2Nyb2xsVG9wIHx8IHRoaXMuc2Nyb2xsVG9wO1xuICAgICAgICBpZiAoc2Nyb2xsVG9wICsgc2VsZi5fd2luZG93SGVpZ2h0ID49IHNlbGYuX2NvbnRhaW5lckhlaWdodCAtIHNlbGYuX2Rpc3RhbmNlRW5kKSB7XG4gICAgICAgICAgaWYgKCFzZWxmLl9pc1Njcm9sbEIpIHtcbiAgICAgICAgICAgIC8vIOinpuW6leaXtiDop6blj5FcbiAgICAgICAgICAgIHNlbGYuY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VsZi5faXNTY3JvbGxCID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g55uR5ZCs56qX5Y+j5aSn5bCP5pS55Y+Y5pe26YeN5paw6K6h566XXG5cbiAgfSwge1xuICAgIGtleTogJ2xpc3RlblJlc2l6ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxpc3RlblJlc2l6ZSgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLmluaXQoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEcm9wbG9hZDtcbn0oKTsiXX0=
