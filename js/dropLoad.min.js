"use strict";var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,n){if(t)i(e.prototype,t);if(n)i(e,n);return e}}();function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var Dropload=function(){function t(e){_classCallCheck(this,t);this._windowHeight=0;this._containerHeight=0;this._isScrollB=false;this._distanceEnd=e.distanceEnd?e.distanceEnd:100;this.callback=e.success?e.success:function(){throw new Error("请添加触底时回调函数！")};this.init();this.listenWindowScroll();this.listenResize()}_createClass(t,[{key:"init",value:function e(){this._windowHeight=this.initWindoHeight();this._containerHeight=this.initContainerHeight()}},{key:"initWindoHeight",value:function e(){var t=0;if(document.body.clientHeight&&document.documentElement.clientHeight){t=Math.min(document.body.clientHeight,document.documentElement.clientHeight)}else{t=Math.max(document.body.clientHeight,document.documentElement.clientHeight)}return t}},{key:"initContainerHeight",value:function e(){var t=document.querySelector(".container");var n=0;try{n=t.offsetHeight}catch(e){throw new Error("请添加添加类为container的容器！")}return n}},{key:"refresh",value:function e(){this.init();this._isScrollB=false}},{key:"listenWindowScroll",value:function e(){var t=this;window.addEventListener("scroll",function(){var e=document.documentElement.scrollTop||document.body.scrollTop;if(e+t._windowHeight>=t._containerHeight-t._distanceEnd){if(!t._isScrollB){t.callback()}t._isScrollB=true}})}},{key:"listenResize",value:function e(){var t=this;window.addEventListener("resize",function(){t.init()})}}]);return t}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BMb2FkLmpzIl0sIm5hbWVzIjpbIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJDb25zdHJ1Y3RvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiVHlwZUVycm9yIiwiRHJvcGxvYWQiLCJvcHRpb25zIiwidGhpcyIsIl93aW5kb3dIZWlnaHQiLCJfY29udGFpbmVySGVpZ2h0IiwiX2lzU2Nyb2xsQiIsIl9kaXN0YW5jZUVuZCIsImRpc3RhbmNlRW5kIiwiY2FsbGJhY2siLCJzdWNjZXNzIiwiRXJyb3IiLCJpbml0IiwibGlzdGVuV2luZG93U2Nyb2xsIiwibGlzdGVuUmVzaXplIiwidmFsdWUiLCJpbml0V2luZG9IZWlnaHQiLCJpbml0Q29udGFpbmVySGVpZ2h0Iiwid0hlaWdodCIsImRvY3VtZW50IiwiYm9keSIsImNsaWVudEhlaWdodCIsImRvY3VtZW50RWxlbWVudCIsIk1hdGgiLCJtaW4iLCJtYXgiLCJjb250YWluZXJfZWwiLCJxdWVyeVNlbGVjdG9yIiwib2Zmc2V0SCIsIm9mZnNldEhlaWdodCIsImVyciIsInJlZnJlc2giLCJzZWxmIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNjcm9sbFRvcCIsIl90aGlzIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLElBQUlBLGFBQWUsV0FBYyxTQUFTQyxFQUFpQkMsRUFBUUMsR0FBUyxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLElBQUlFLEVBQWFILEVBQU1DLEdBQUlFLEVBQVdDLFdBQWFELEVBQVdDLFlBQWMsTUFBT0QsRUFBV0UsYUFBZSxLQUFNLEdBQUksVUFBV0YsRUFBWUEsRUFBV0csU0FBVyxLQUFNQyxPQUFPQyxlQUFlVCxFQUFRSSxFQUFXTSxJQUFLTixJQUFpQixPQUFPLFNBQVVPLEVBQWFDLEVBQVlDLEdBQWUsR0FBSUQsRUFBWWIsRUFBaUJZLEVBQVlHLFVBQVdGLEdBQWEsR0FBSUMsRUFBYWQsRUFBaUJZLEVBQWFFLEdBQWMsT0FBT0YsR0FBN2dCLEdBRW5CLFNBQVNJLGdCQUFnQkMsRUFBVUwsR0FBZSxLQUFNSyxhQUFvQkwsR0FBYyxDQUFFLE1BQU0sSUFBSU0sVUFBVSxzQ0FXaEgsSUFBSUMsU0FBVyxXQUNiLFNBQVNBLEVBQVNDLEdBQ2hCSixnQkFBZ0JLLEtBQU1GLEdBS3RCRSxLQUFLQyxjQUFnQixFQUVyQkQsS0FBS0UsaUJBQW1CLEVBRXhCRixLQUFLRyxXQUFhLE1BR2xCSCxLQUFLSSxhQUFlTCxFQUFRTSxZQUFjTixFQUFRTSxZQUFjLElBRWhFTCxLQUFLTSxTQUFXUCxFQUFRUSxRQUFVUixFQUFRUSxRQUFVLFdBQ2xELE1BQU0sSUFBSUMsTUFBTSxnQkFJbEJSLEtBQUtTLE9BR0xULEtBQUtVLHFCQUVMVixLQUFLVyxlQUdQakMsYUFBYW9CLEVBQVUsQ0FBQyxDQUN0QlIsSUFBSyxPQUNMc0IsTUFBTyxTQUFTSCxJQUNkVCxLQUFLQyxjQUFnQkQsS0FBS2Esa0JBQzFCYixLQUFLRSxpQkFBbUJGLEtBQUtjLHdCQUs5QixDQUNEeEIsSUFBSyxrQkFDTHNCLE1BQU8sU0FBU0MsSUFDZCxJQUFJRSxFQUFVLEVBQ2QsR0FBSUMsU0FBU0MsS0FBS0MsY0FBZ0JGLFNBQVNHLGdCQUFnQkQsYUFBYyxDQUN2RUgsRUFBVUssS0FBS0MsSUFBSUwsU0FBU0MsS0FBS0MsYUFBY0YsU0FBU0csZ0JBQWdCRCxrQkFDbkUsQ0FDTEgsRUFBVUssS0FBS0UsSUFBSU4sU0FBU0MsS0FBS0MsYUFBY0YsU0FBU0csZ0JBQWdCRCxjQUcxRSxPQUFPSCxJQUtSLENBQ0R6QixJQUFLLHNCQUNMc0IsTUFBTyxTQUFTRSxJQUNkLElBQUlTLEVBQWVQLFNBQVNRLGNBQWMsY0FDMUMsSUFBSUMsRUFBVSxFQUNkLElBQ0VBLEVBQVVGLEVBQWFHLGFBQ3ZCLE1BQU9DLEdBQ1AsTUFBTSxJQUFJbkIsTUFBTSx3QkFHbEIsT0FBT2lCLElBS1IsQ0FDRG5DLElBQUssVUFDTHNCLE1BQU8sU0FBU2dCLElBQ2Q1QixLQUFLUyxPQUNMVCxLQUFLRyxXQUFhLFFBS25CLENBQ0RiLElBQUsscUJBQ0xzQixNQUFPLFNBQVNGLElBQ2QsSUFBSW1CLEVBQU83QixLQUNYOEIsT0FBT0MsaUJBQWlCLFNBQVUsV0FDaEMsSUFBSUMsRUFBWWhCLFNBQVNHLGdCQUFnQmEsV0FBYWhCLFNBQVNDLEtBQUtlLFVBR3BFLEdBQUlBLEVBQVlILEVBQUs1QixlQUFpQjRCLEVBQUszQixpQkFBbUIyQixFQUFLekIsYUFBYyxDQUMvRSxJQUFLeUIsRUFBSzFCLFdBQVksQ0FFcEIwQixFQUFLdkIsV0FFUHVCLEVBQUsxQixXQUFhLFVBT3ZCLENBQ0RiLElBQUssZUFDTHNCLE1BQU8sU0FBU0QsSUFDZCxJQUFJc0IsRUFBUWpDLEtBRVo4QixPQUFPQyxpQkFBaUIsU0FBVSxXQUNoQ0UsRUFBTXhCLGFBS1osT0FBT1gsRUE3R00iLCJmaWxlIjoiZHJvcExvYWQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKlxyXG4gKiBAQXV0aG9yOiBsaXdlaWxvbmdcclxuICogQERhdGU6IDIwMjAtMTEtMTMgMTg6MzQ6MDNcclxuICovXG4vKiogXHJcbiAqIDHjgIHojrflj5bnqpflj6Ppq5jluqZcclxuICogMuOAgeiOt+WPlmNvbnRhaW5lcumrmOW6plxyXG4gKiAz44CB6I635Y+W5rua5Yqo6Led56a7c2Nyb2xsVG9wICsg56qX5Y+j6Led56a7ID4gY29udGFpbmVy6auY5bqm5pe26Kem5Y+R5Yqg6L295pu05aSaXHJcbiAqL1xudmFyIERyb3Bsb2FkID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEcm9wbG9hZChvcHRpb25zKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyb3Bsb2FkKTtcblxuICAgIC8vIOWIneWni+WMluS9jee9rlxuICAgIC8vIHRoaXMuX2luaXREaXN0YW5jZSA9IDBcbiAgICAvLyDnqpflj6Ppq5jluqZcbiAgICB0aGlzLl93aW5kb3dIZWlnaHQgPSAwO1xuICAgIC8vIGNvbnRhaW5lcumrmOW6plxuICAgIHRoaXMuX2NvbnRhaW5lckhlaWdodCA9IDA7XG4gICAgLy8g5piv5ZCm6Kem5bqVXG4gICAgdGhpcy5faXNTY3JvbGxCID0gZmFsc2U7XG5cbiAgICAvLyDot53nprvlupXpg6jlpJrlsJHot53nprvop6blj5FcbiAgICB0aGlzLl9kaXN0YW5jZUVuZCA9IG9wdGlvbnMuZGlzdGFuY2VFbmQgPyBvcHRpb25zLmRpc3RhbmNlRW5kIDogMTAwO1xuICAgIC8vIOinpuW6leaXtiDop6blj5FcbiAgICB0aGlzLmNhbGxiYWNrID0gb3B0aW9ucy5zdWNjZXNzID8gb3B0aW9ucy5zdWNjZXNzIDogZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfor7fmt7vliqDop6blupXml7blm57osIPlh73mlbDvvIEnKTtcbiAgICB9O1xuXG4gICAgLy8g5Yid5aeL5YyW5rWB56iLXG4gICAgdGhpcy5pbml0KCk7XG5cbiAgICAvLyDnm5HlkKzmu5rliqhcbiAgICB0aGlzLmxpc3RlbldpbmRvd1Njcm9sbCgpO1xuICAgIC8vIOebkeWQrOeql+WPo+aUueWPmFxuICAgIHRoaXMubGlzdGVuUmVzaXplKCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRHJvcGxvYWQsIFt7XG4gICAga2V5OiAnaW5pdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICB0aGlzLl93aW5kb3dIZWlnaHQgPSB0aGlzLmluaXRXaW5kb0hlaWdodCgpO1xuICAgICAgdGhpcy5fY29udGFpbmVySGVpZ2h0ID0gdGhpcy5pbml0Q29udGFpbmVySGVpZ2h0KCk7XG4gICAgfVxuXG4gICAgLy8g5Yid5aeL5YyW56qX5Y+j6auY5bqmXG5cbiAgfSwge1xuICAgIGtleTogJ2luaXRXaW5kb0hlaWdodCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRXaW5kb0hlaWdodCgpIHtcbiAgICAgIHZhciB3SGVpZ2h0ID0gMDtcbiAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgIHdIZWlnaHQgPSBNYXRoLm1pbihkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3SGVpZ2h0ID0gTWF0aC5tYXgoZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgfVxuICAgICAgLy8gY29uc29sZS5sb2coJ+a1j+iniOWZqOeql+WPo+mrmOW6picsIHdIZWlnaHQpXG4gICAgICByZXR1cm4gd0hlaWdodDtcbiAgICB9XG5cbiAgICAvLyDliJ3lp4vljJZjb250YWluZXLpq5jluqZcblxuICB9LCB7XG4gICAga2V5OiAnaW5pdENvbnRhaW5lckhlaWdodCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRDb250YWluZXJIZWlnaHQoKSB7XG4gICAgICB2YXIgY29udGFpbmVyX2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpO1xuICAgICAgdmFyIG9mZnNldEggPSAwO1xuICAgICAgdHJ5IHtcbiAgICAgICAgb2Zmc2V0SCA9IGNvbnRhaW5lcl9lbC5vZmZzZXRIZWlnaHQ7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwi6K+35re75Yqg5re75Yqg57G75Li6Y29udGFpbmVy55qE5a655Zmo77yBXCIpO1xuICAgICAgfVxuICAgICAgLy8gY29uc29sZS5sb2coJ2NvbnRhaW5lcumrmOW6picsIG9mZnNldEgpXG4gICAgICByZXR1cm4gb2Zmc2V0SDtcbiAgICB9XG5cbiAgICAvLyDph43mlrDorqHnrpd3aW5kb3fnqpflj6Plrr3luqblkozpq5jluqZcblxuICB9LCB7XG4gICAga2V5OiAncmVmcmVzaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlZnJlc2goKSB7XG4gICAgICB0aGlzLmluaXQoKTtcbiAgICAgIHRoaXMuX2lzU2Nyb2xsQiA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIOebkeWQrOa7muWKqOadoea7muWKqFxuXG4gIH0sIHtcbiAgICBrZXk6ICdsaXN0ZW5XaW5kb3dTY3JvbGwnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBsaXN0ZW5XaW5kb3dTY3JvbGwoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2Nyb2xsVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcbiAgICAgICAgLy8gY29uc29sZS5sb2coc2Nyb2xsVG9wKVxuXG4gICAgICAgIGlmIChzY3JvbGxUb3AgKyBzZWxmLl93aW5kb3dIZWlnaHQgPj0gc2VsZi5fY29udGFpbmVySGVpZ2h0IC0gc2VsZi5fZGlzdGFuY2VFbmQpIHtcbiAgICAgICAgICBpZiAoIXNlbGYuX2lzU2Nyb2xsQikge1xuICAgICAgICAgICAgLy8g6Kem5bqV5pe2IOinpuWPkVxuICAgICAgICAgICAgc2VsZi5jYWxsYmFjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZWxmLl9pc1Njcm9sbEIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyDnm5HlkKznqpflj6PlpKflsI/mlLnlj5jml7bph43mlrDorqHnrpdcblxuICB9LCB7XG4gICAga2V5OiAnbGlzdGVuUmVzaXplJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbGlzdGVuUmVzaXplKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuaW5pdCgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIERyb3Bsb2FkO1xufSgpOyJdfQ==
